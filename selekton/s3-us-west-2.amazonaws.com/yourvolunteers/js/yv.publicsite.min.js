function sendContact(){if(""==$("#input_name").val()||""==$("#input_email").val()||""==$("#brief_desc").val())return $("#error_message").text("All fields are required."),$("#error_block").show(),!1;if(!$("#input_anti_spam").is(":checked"))return $("#error_message").text("Please check the box to indicate that you are a human or at least a really smart dolphin with Internet access."),$("#error_block").show(),!1;if(!validEmail($("#input_email").val()))return $("#error_message").text("The email address does not appear to be valid."),
$("#error_block").show(),!1;sendContactMessage();$("#input_name").val("");$("#input_email").val("");$("#brief_desc").val("");$("#error_message").text("Your message has been sent.");$("#error_block").removeClass("alert-danger");$("#error_block").addClass("alert-success");$("#error_block h4").text("Success!");$("#error_block").show();return!1}
function sendContactMessage(){var a=[];a[0]=$("#input_name").val();a[1]=$("#input_email").val();a[2]=$("#brief_desc").val();a[3]=$("#malcom_reynolds").text();sendContactMessageProcess(a,function(a){switch(a){case "token":alert(getTokenAlert());break;case "failed":alert("There was an issue sending the message. Please refresh this page and try again.")}})}
function sendContactMessageProcess(a,b){$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/rest/PubWebsiteService/Message",data:JSON.stringify({messagePacket:a}),async:!1,statusCode:{200:function(a){b("success")},400:function(a){b("failed")},403:function(a){b("token")}}})}function getStarted(){window.location.href="/pub/orgregistration"}
function processOrg(){if(""==$("#org_name").val()||""==$("#contact_first").val()||""==$("#contact_last").val()||""==$("#input_email").val()||""==$("#brief_desc").val())return alert("Please enter a value for all required fields."),!1;if(!$("#input_anti_spam").is(":checked"))return alert("Please check the box to indicate that you are a human or at least a really smart dolphin with Internet access."),!1;if(!validEmail($("#input_email").val()))return alert("The email address does not appear to be valid."),
!1;$("#loading").show();var a=buildOrgPacket();orgProcess(a,function(a){if("bad token"==a)return $("#loading").hide(),alert(getTokenAlert()),!1;if(null==a||"null"==a||""==a)return $("#loading").hide(),alert("Something went wrong. Go back to the main site and contact us so we can assist you in setting up your account."),!1;window.location.href="orgregistration2?temp="+a})}
function buildOrgPacket(){var a=[];a[0]=$("#malcom_reynolds").text();a[1]=$("#org_name").val();a[2]=$("#contact_first").val();a[3]=$("#contact_last").val();a[4]=$("#input_email").val();a[5]=$("#input_website").val();a[6]=$("#brief_desc").val();return a}
function orgProcess(a,b){$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/rest/PubWebsiteService/Org",data:JSON.stringify({messagePacket:a}),dataType:"text",async:!1,success:b,failure:function(a){alert("error getting all interests.")}})}
function processOrgManager(){if(""==$("#input_username").val()||""==$("#input_first").val()||""==$("#input_last").val()||""==$("#input_email").val())return alert("Please enter a value for all required fields."),!1;if(!validEmail($("#input_email").val()))return alert("The email address does not appear to be valid."),!1;$("#loading").show();checkUsername($("#input_username").val(),$("#malcom_reynolds").text(),function(a){if("failed"==a)return $("#loading").hide(),alert("This username is not available. Please choose another one."),
$("#input_username").val(""),$("#input_username").focus(),!1;var b=buildManagerPacket();orgManagerProcess(b,function(a){if("bad token"==a)return $("#loading").hide(),alert(getTokenAlert()),!1;if(null==a||"null"==a||""==a)return $("#loading").hide(),alert("Something went wrong. Click on the logo to go back to the main site and contact us so we can assist you with setting up your account."),!1;a=a.split("-");window.location.href="orgregistration3?temp="+b[1]+"&f="+a[0]+"&v="+a[1]+"&m="+b[0]})})}
function buildManagerPacket(){var a=[];a[0]=$("#malcom_reynolds").text();a[1]=getQuerystring("temp");a[2]=$("#input_username").val();a[3]=$("#input_first").val();a[4]=$("#input_last").val();a[5]=$("#input_email").val();return a}function orgManagerProcess(a,b){$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/rest/PubWebsiteService/Manager",data:JSON.stringify({messagePacket:a}),dataType:"text",async:!1,success:b,failure:function(a){alert("error adding manager.")}})}
function processOrgAgreement(){$("#loading").show();var a=[];a[0]=$("#malcom_reynolds").text();a[1]=getQuerystring("temp");a[2]=getQuerystring("f");a[3]=getQuerystring("v");a[4]=getQuerystring("m");orgAgreementProcess(a,function(a){switch(a){case "token":alert(getTokenAlert());$("#loading").hide();break;case "failed":alert("There was an issue. Please refresh this page and try again.");$("#loading").hide();break;case "success":$("#agreement_div").hide(),$("#button_div").hide(),$("#success").show(),
$("#loading").hide()}})}function orgAgreementProcess(a,b){$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/rest/PubWebsiteService/Agreement",data:JSON.stringify({messagePacket:a}),async:!1,statusCode:{200:function(a){b("success")},400:function(a){b("failed")},403:function(a){b("token")}}})}function loadPublicCalendar(){var a=window.location.href.split("?")[1];loadPublicCalendarButtons(a);loadFocusTitle(a);createPublicCalendar(a)}
function loadPublicCalendarButtons(a){var b=[];b.push("<a href='https://yourvolunteers.com/vol?"+a+"' ");b.push("class='btn btn-default btn-lg' target='_blank'>");b.push("Go to Volunteer Site  ");b.push("<span class='glyphicon glyphicon-arrow-right'></span>");b.push("</a>");$("#button_row").html(b.join(""))}
function loadFocusTitle(a){$.ajax({type:"GET",contentType:"application/json; charset=utf-8",url:"/rest/FocusService/FocusTitle/"+a,async:!1,success:function(a){$("h2").text(a)},failure:function(a){alert("error getting title.")}})}
function createPublicCalendar(a){$("#calendar_shifts").fullCalendar({events:function(b,c,e){loadDataForPublicCalendar(b.getTime()/1E3,c.getTime()/1E3,a,function(a){e(a)})},editable:!1,eventColor:"#462e00",eventRender:function(a,c){var e=moment(a.start).format("YYYY-MM-DD");$("#selected_day").text(e);c.attr("href","javascript:void(0);");c.attr("onclick",'openDayFromPublicCal("'+e+'");');c.find(".fc-event-title").html(a.title+'  <span class="glyphicon glyphicon-search"></span>')},dayClick:function(a,
c,e,d){$("#selected_day").text(moment(a).format("YYYY-MM-DD"));openDayFromPublicCal(a)}})}function loadDataForPublicCalendar(a,b,c,e){$("#loading").show();$("#savedArray").text("");var d=[];d[0]=$("#malcom_reynolds").text();d[1]=c;d[2]=a;d[3]=b;getAllShiftsForPublicCalendar(d,function(a){$("#savedArray").text(JSON.stringify(a));buildPublicCalendar(a,function(a){e(a)});$("#loading").hide()})}
function getAllShiftsForPublicCalendar(a,b){$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/rest/PubWebsiteService/ShiftsByMonthForCalendar",data:JSON.stringify({messagePacket:a}),dataType:"json",async:!1,success:b})}
function buildPublicCalendar(a,b){var c=[];0!=a.length&&($.each(a,function(b,d){var g=moment(d.startDateTime).format("YYYY-MM-DD");if(1>$.grep(c,function(a){return 0<c.length?g==a.start:0})){var f=$.grep(a,function(a){a=moment(a.startDateTime).format("YYYY-MM-DD");return g==a});if(0!=f){var h=0,k=0;$.each(f,function(a,b){h+=b.assigned;k+=b.needed});c.push({title:f.length+" Shifts ("+h+" of "+k+")",start:moment(d.startDateTime).format("YYYY-MM-DD"),allday:!0})}}}),b(c))}
function openDayFromPublicCal(a){var b=moment(a).format("YYYY-MM-DD");$("#selected_day").text(b);var c=$.parseJSON($("#savedArray").text());a=$.grep(c,function(a){return b==moment(a.startDateTime).format("YYYY-MM-DD")});a.sort(sortByStartAndEnd);$(".modal-title").text("Shifts on "+b);c.length=0;$.each(a,function(a,b){var g=parseInt(b.assigned),f=parseInt(b.needed);c.push("<b>");c.push(b.shiftName);c.push("</b><br />");c.push(formatYVTime(new Date(b.startDateTime)));c.push(" - ");c.push(formatYVTime(new Date(b.endDateTime)));
c.push("<br />");g>=f?(c.push("<span style='color: red'>"),c.push("This shift is full</span>")):(c.push("<span style='color: green'>"),c.push("Volunteers still needed</span>"));c.push("<br /><br />")});$(".modal-body").html(c.join(""));$("#myModal").modal();return!1}
function checkOrgSuccess(){var a=getQuerystring("temp");if(null==a||""==a||"null"==a)return alert("We're sorry. It appears that something went wrong in the last step. Go back to the previous page and refresh it to try again. If you would prefer, click on the logo to go back to the main site and then contact us to assist you with creating an account with us."),!1;$.get("/rest/PubWebsiteService/OrgName/"+a,function(a){$("h4").text(a)})}
function checkUsername(a,b,c){$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/rest/LoginService/CheckUsername",data:JSON.stringify({username:a,token:b}),dataType:"text",success:c})};